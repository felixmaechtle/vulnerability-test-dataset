import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Savepoint;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
public class GeneratedClass {
public static void trace(HttpServletRequest var0, HttpServletResponse var1) throws Throwable {
    PrintWriter var3 = var1.getWriter();
    String var12 = var0.getParameter("id");
    String var13 = var0.getParameter("recipient");
    var13 = var13.trim();
    String var14 = var0.getParameter("amount");
    var14 = var14.trim();
    String var15 = var0.getParameter("description");
    if (var13.length() == 0) return;
    if (var14.length() == 0) return;
    double var16 = Double.parseDouble(var14);
    var13 = var13;
    if (var12 == null) {
        if (true) { {}
}
        var13 = var13;
        if (var13 == null) return; {}
}
    if (var13.trim().isEmpty()) return;
    if (true) {
        Connection var19 = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/bank", "root", "");
        if (var19 == null) return;
        var19.setAutoCommit(false);
        Savepoint var20 = var19.setSavepoint();
        PreparedStatement var25 = var19.prepareStatement("select tbAccount.aid,balance,isactive,fname,mname,lname from tbAccount, tbClient  where acnumber= ? and tbAccount.cid=tbClient.cid");
        var25.setString(1, var12);
        ResultSet var26 = var25.executeQuery();
        if (var26.next()) {
            int var27 = var26.getInt("aid");
            double var28 = var26.getDouble("balance");
            boolean var30 = var26.getBoolean("isactive");
            String var31 = var26.getString("fname");
            String var32 = var26.getString("mname");
            String var33 = var26.getString("lname");
            StringBuilder var10000 = new StringBuilder();
            var10000 = var10000.append(var31).append(" ");
            if (var32 == null) return;
            var10000.append(var32).append(" ").append(var33).toString();
            if (!(var28 < var16)) {
                PreparedStatement var37 = var19.prepareStatement("select aid,isactive, fname,mname,lname from tbAccount,tbClient  where acnumber= ? and tbAccount.cid=tbClient.cid");
                var37.setString(1, var13);
                ResultSet var38 = var37.executeQuery();
                if (var38.next()) {
                    int var39 = var38.getInt("aid");
                    boolean var40 = var38.getBoolean("isactive");
                    String var41 = var38.getString("fname");
                    String var42 = var38.getString("mname");
                    String var43 = var38.getString("lname");
                    var10000 = new StringBuilder();
                    var10000 = var10000.append(var41).append(" ");
                    if (var42 == null) {
                        String var36 = var10000.append("").append(" ").append(var43).toString();
                        PreparedStatement var46 = var19.prepareStatement("update tbAccount set balance = balance - ?  where balance >= ?  and acnumber = ?  and isactive=TRUE ");
                        var46.setDouble(1, var16);
                        var46.setDouble(2, var16);
                        var46.setString(3, var12);
                        PreparedStatement var48 = var19.prepareStatement("update tbAccount set balance = balance + ?  where acnumber = ?  and isactive=TRUE ");
                        var48.setDouble(1, var16);
                        var48.setString(2, var13);
                        int var49 = var48.executeUpdate();
                        SimpleDateFormat var58 = new SimpleDateFormat("yyyy-MM-dd");
                        SimpleDateFormat var60 = var58;
                        Date var59 = new Date();
                        Date var61 = var59;
                        String var52 = var60.format(var61);
                        Object[] var10001 = new Object[] { Integer.valueOf(var27), Integer.valueOf(4), Double.valueOf(var16), Double.valueOf(var16), var13, var36, var52, var15 };
                        String var53 = String.format("insert into tbTransaction(aid,trtype,amount,description)       values( %d, \t\t\t%d, \t\t\t%f, 'Transfer out %.2f dollars to %s(%s) on %s. MEMO: %s' ) ", var10001);
                        int var54 = var48.executeUpdate(var53);
                        var10001 = new Object[] { Integer.valueOf(var39), Integer.valueOf(3), Double.valueOf(var16), Double.valueOf(var16), var12, var36, var52, var15 };
                        String var55 = String.format("insert into tbTransaction(aid,trtype,amount,description)  values( %d,  %d, \t%f, 'Transfer in %.2f dollars from %s(%s) on %s. MEMO: %s' ) ", var10001);
                        int var56 = var48.executeUpdate(var55);
                        if (var56 <= 0) {
                            var19.rollback(var20);
                            boolean var57 = false;
                            var19.setAutoCommit(true);
                            if (var19 != null) { {}
}
                            if (var57) {
                                var3.print("<title>Success</title>");
                                var3.print("<script>alert('Transfer success.');</script>");
                            }
                        }
                    }
                }
            }
        }
    }
}

}